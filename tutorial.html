<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Treinamento em Vídeo – Protocolo</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --green-dark: #004d40;
            --yellow: #ffd600;
            --white: #ffffff;
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--white);
            color: #333;
            overflow-x: hidden;
        }
        
        .btn-primary {
            background-color: var(--green-dark);
            color: var(--white);
            border: 2px solid var(--yellow);
            border-radius: 12px;
            padding: 14px 28px;
            font-weight: 600;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0,0,0,0.15);
        }
        
        .btn-primary:active {
            transform: translateY(1px);
        }
        
        .btn-primary::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 150%;
            height: 150%;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: transform 0.5s, opacity 0.3s;
        }
        
        .btn-primary:hover::after {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        
        .divergence-item {
            background-color: var(--white);
            border: 2px solid var(--yellow);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 16px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
        }
        
        .divergence-item:hover {
            transform: translateY(-3px) scale(1.01);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .divergence-item h3 {
            color: var(--green-dark);
            font-weight: 600;
            margin: 0;
        }
        
        .icon-container {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--green-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            flex-shrink: 0;
        }
        
        .play-icon {
            fill: var(--yellow);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(0.95);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(0.95);
            }
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.8s forwards;
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .staggered-fade-in > * {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .staggered-fade-in > *:nth-child(1) { animation: fadeIn 0.5s 0.1s forwards; }
        .staggered-fade-in > *:nth-child(2) { animation: fadeIn 0.5s 0.2s forwards; }
        .staggered-fade-in > *:nth-child(3) { animation: fadeIn 0.5s 0.3s forwards; }
        .staggered-fade-in > *:nth-child(4) { animation: fadeIn 0.5s 0.4s forwards; }
        .staggered-fade-in > *:nth-child(5) { animation: fadeIn 0.5s 0.5s forwards; }
        
        .search-container {
            position: relative;
            margin-bottom: 24px;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 20px 12px 50px;
            border: 2px solid var(--yellow);
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .search-input:focus {
            outline: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-color: var(--green-dark);
        }
        
        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--green-dark);
        }
        
        .back-btn {
            background-color: transparent;
            color: var(--green-dark);
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .back-btn:hover {
            background-color: rgba(0,77,64,0.1);
        }
        
        .logo {
            height: 60px;
            margin-bottom: 20px;
        }
        
        .header-container {
            background-color: var(--green-dark);
            padding: 20px;
            border-radius: 0 0 30px 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .header-text {
            color: var(--white);
        }
        
        .yellow-highlight {
            color: var(--yellow);
            font-weight: 700;
        }
        
        .app-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px 40px;
        }
        
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        .arrow-icon {
            margin-left: auto;
            color: var(--green-dark);
            transition: var(--transition);
        }
        
        .divergence-item:hover .arrow-icon {
            transform: translateX(5px);
        }
        
        .watched-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--green-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            opacity: 0.5;
            transition: var(--transition);
        }
        
        .watched .watched-indicator {
            opacity: 1;
        }
        
        .watched-icon {
            fill: var(--yellow);
            width: 12px;
            height: 12px;
        }
        
        .video-button {
            background-color: var(--green-dark);
            color: var(--white);
            border: 3px solid var(--yellow);
            border-radius: 16px;
            padding: 20px 32px;
            font-weight: 700;
            font-size: 18px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            width: 100%;
            max-width: 500px;
            margin: 40px auto;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }
        
        .video-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.25);
            background-color: #003a30;
        }
        
        .video-button:active {
            transform: translateY(2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .video-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: transform 0.8s, opacity 0.5s;
        }
        
        .video-button:hover::after {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        
        .tutorial-info {
            background-color: rgba(0,77,64,0.05);
            border-left: 4px solid var(--green-dark);
            padding: 16px;
            border-radius: 0 8px 8px 0;
            margin: 24px 0;
        }
        
        .play-button-large {
            width: 100px;
            height: 100px;
            background-color: var(--green-dark);
            border: 4px solid var(--yellow);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
            cursor: pointer;
        }
        
        .play-button-large svg {
            width: 50px;
            height: 50px;
            fill: var(--yellow);
        }
        
        .back-to-home {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: rgba(255,255,255,0.2);
            color: var(--white);
            border: 1px solid var(--yellow);
            border-radius: 8px;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: var(--transition);
            z-index: 10;
        }
        
        .back-to-home:hover {
            background-color: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        .back-to-home svg {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="header-container">
                <div class="flex justify-center">
                    <svg class="logo" viewBox="0 0 200 60" xmlns="http://www.w3.org/2000/svg">
                        <rect width="200" height="60" rx="10" fill="#004d40"/>
                        <text x="100" y="38" font-size="24" font-weight="bold" text-anchor="middle" fill="#ffd600">PROTOCOLO</text>
                    </svg>
                </div>
                <div class="text-center mt-4 header-text">
                    <h1 class="text-2xl font-bold mb-2 fade-in">Bem-vindo, <span class="yellow-highlight">Diligenciador!</span></h1>
                    <p class="text-lg fade-in" style="animation-delay: 0.2s;">Aqui temos alguns tutoriais em vídeo pra você.</p>
                </div>
            </div>
            
            <div class="flex justify-center mt-10 fade-in" style="animation-delay: 0.4s;">
                <button id="select-divergence-btn" class="btn-primary text-lg">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Selecione sua Divergência
                </button>
            </div>
        </div>
        
        <!-- Divergence Selection Screen -->
        <div id="divergence-screen" class="screen">
            <div class="header-container">
                <button id="back-to-welcome" class="back-to-home">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Voltar
                </button>
                <h1 class="text-2xl font-bold text-center header-text">Selecione a <span class="yellow-highlight">Divergência</span></h1>
            </div>
            
            <div class="search-container fade-in">
                <input type="text" id="search-input" class="search-input" placeholder="Buscar divergência...">
                <svg class="w-5 h-5 search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
            </div>
            
            <div class="divergence-list staggered-fade-in">
                <div class="divergence-item" data-tutorial="VP19" data-url="https://petrobrasbr.sharepoint.com/:v:/r/teams/bdoc_SUPRIMENTOS-GCB-GCBO-GCD-2/Documentos%20Compartilhados/02%20-%20DILIGENCIAMENTO/03%20-%20PROTOCOLO/Dilig%20protocolo/Tutorial%20Protocolos/Tutorial%20-%20VP19.mp4?csf=1&web=1&e=rSsqzD">
                    <div class="icon-container">
                        <svg class="w-6 h-6 play-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg">🔹 VP19 – Tutorial em Vídeo</h3>
                        <p class="text-sm text-gray-600 mt-1">Procedimento para divergência VP19</p>
                    </div>
                    <div class="watched-indicator">
                        <svg class="watched-icon" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <svg class="w-5 h-5 arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
                
                <div class="divergence-item" data-tutorial="VP36" data-url="https://petrobrasbr.sharepoint.com/:v:/r/teams/bdoc_SUPRIMENTOS-GCB-GCBO-GCD-2/Documentos%20Compartilhados/02%20-%20DILIGENCIAMENTO/03%20-%20PROTOCOLO/Dilig%20protocolo/Tutorial%20Protocolos/Tutorial%20VP36.mp4?csf=1&web=1&e=Pt4uTe">
                    <div class="icon-container">
                        <svg class="w-6 h-6 play-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg">🔹 VP36 – Tutorial em Vídeo</h3>
                        <p class="text-sm text-gray-600 mt-1">Procedimento para divergência VP36</p>
                    </div>
                    <div class="watched-indicator">
                        <svg class="watched-icon" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <svg class="w-5 h-5 arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
                
                <div class="divergence-item" data-tutorial="VP37" data-url="https://petrobrasbr.sharepoint.com/:v:/r/teams/bdoc_SUPRIMENTOS-GCB-GCBO-GCD-2/Documentos%20Compartilhados/02%20-%20DILIGENCIAMENTO/03%20-%20PROTOCOLO/Dilig%20protocolo/Tutorial%20Protocolos/Tutorial%20VP37.mp4?csf=1&web=1&e=YzVJWH">
                    <div class="icon-container">
                        <svg class="w-6 h-6 play-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg">🔹 VP37 – Tutorial em Vídeo</h3>
                        <p class="text-sm text-gray-600 mt-1">Procedimento para divergência VP37</p>
                    </div>
                    <div class="watched-indicator">
                        <svg class="watched-icon" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <svg class="w-5 h-5 arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
                
                <div class="divergence-item" data-tutorial="PRTM" data-url="https://petrobrasbr.sharepoint.com/:v:/r/teams/bdoc_SUPRIMENTOS-GCB-GCBO-GCD-2/Documentos%20Compartilhados/02%20-%20DILIGENCIAMENTO/03%20-%20PROTOCOLO/Dilig%20protocolo/Tutorial%20Protocolos/PROTOCOLO%20STATUS%20PRTM.mp4?csf=1&web=1&e=RKhDnA">
                    <div class="icon-container">
                        <svg class="w-6 h-6 play-icon" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg">🔹 PRTM – Tutorial em Vídeo</h3>
                        <p class="text-sm text-gray-600 mt-1">Procedimento para divergência PRTM</p>
                    </div>
                    <div class="watched-indicator">
                        <svg class="watched-icon" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <svg class="w-5 h-5 arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
        </div>
        
        <!-- Tutorial Screen -->
        <div id="tutorial-screen" class="screen">
            <div class="header-container">
                <button id="back-to-divergence" class="back-to-home">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Voltar
                </button>
                <h1 id="tutorial-title" class="text-2xl font-bold text-center header-text">Tutorial <span class="yellow-highlight">VP19</span></h1>
            </div>
            
            <div class="tutorial-content bg-white rounded-lg p-6 shadow-md fade-in">
                <div class="play-button-large">
                    <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 5v14l11-7z"></path>
                    </svg>
                </div>
                
                <a id="video-link" href="#" target="_blank" class="video-button">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Assistir Tutorial no SharePoint
                </a>
                
                <div class="tutorial-info mt-6">
                    <h3 class="text-xl font-semibold text-green-800 mb-3">Sobre este Tutorial</h3>
                    <p class="text-gray-700 mb-4">Este vídeo demonstra o procedimento completo para tratamento da divergência selecionada. Siga as instruções passo a passo para garantir o correto processamento.</p>
                    
                    <div class="flex justify-between mt-8">
                        <button id="select-new-tutorial" class="btn-primary">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
                            </svg>
                            Selecionar Outro Tutorial
                        </button>
                        
                        <button id="mark-as-watched" class="btn-primary">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Marcar como Assistido
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation between screens
            const welcomeScreen = document.getElementById('welcome-screen');
            const divergenceScreen = document.getElementById('divergence-screen');
            const tutorialScreen = document.getElementById('tutorial-screen');
            const selectDivergenceBtn = document.getElementById('select-divergence-btn');
            const backToWelcomeBtn = document.getElementById('back-to-welcome');
            const backToDivergenceBtn = document.getElementById('back-to-divergence');
            const selectNewTutorialBtn = document.getElementById('select-new-tutorial');
            const searchInput = document.getElementById('search-input');
            const divergenceItems = document.querySelectorAll('.divergence-item');
            const tutorialTitle = document.getElementById('tutorial-title');
            const markAsWatchedBtn = document.getElementById('mark-as-watched');
            const videoLink = document.getElementById('video-link');
            const playButtonLarge = document.querySelector('.play-button-large');
            
            // Store watched status
            const watchedTutorials = JSON.parse(localStorage.getItem('watchedTutorials')) || {};
            
            // Update watched indicators on load
            updateWatchedIndicators();
            
            // Show divergence screen when button is clicked
            selectDivergenceBtn.addEventListener('click', function() {
                welcomeScreen.classList.remove('active');
                divergenceScreen.classList.add('active');
            });
            
            // Go back to welcome screen
            backToWelcomeBtn.addEventListener('click', function() {
                divergenceScreen.classList.remove('active');
                welcomeScreen.classList.add('active');
            });
            
            // Go back to divergence screen
            backToDivergenceBtn.addEventListener('click', function() {
                tutorialScreen.classList.remove('active');
                divergenceScreen.classList.add('active');
            });
            
            // Select new tutorial button
            selectNewTutorialBtn.addEventListener('click', function() {
                tutorialScreen.classList.remove('active');
                divergenceScreen.classList.add('active');
            });
            
            // Search functionality
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                divergenceItems.forEach(item => {
                    const divergenceCode = item.getAttribute('data-tutorial').toLowerCase();
                    const divergenceTitle = item.querySelector('h3').textContent.toLowerCase();
                    
                    if (divergenceCode.includes(searchTerm) || divergenceTitle.includes(searchTerm)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
            
            // Open tutorial when divergence item is clicked
            divergenceItems.forEach(item => {
                item.addEventListener('click', function() {
                    const tutorialCode = this.getAttribute('data-tutorial');
                    const videoUrl = this.getAttribute('data-url');
                    
                    tutorialTitle.innerHTML = `Tutorial <span class="yellow-highlight">${tutorialCode}</span>`;
                    videoLink.href = videoUrl;
                    
                    // Show the tutorial screen
                    divergenceScreen.classList.remove('active');
                    tutorialScreen.classList.add('active');
                    
                    // Store the current tutorial code for the mark as watched button
                    markAsWatchedBtn.setAttribute('data-tutorial', tutorialCode);
                    
                    // Update button text if already watched
                    if (watchedTutorials[tutorialCode]) {
                        markAsWatchedBtn.innerHTML = `
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Já Assistido
                        `;
                    } else {
                        markAsWatchedBtn.innerHTML = `
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Marcar como Assistido
                        `;
                    }
                });
            });
            
            // Make the large play button also open the video
            playButtonLarge.addEventListener('click', function() {
                videoLink.click();
            });
            
            // Mark tutorial as watched when video link is clicked
            videoLink.addEventListener('click', function() {
                const tutorialCode = markAsWatchedBtn.getAttribute('data-tutorial');
                watchedTutorials[tutorialCode] = true;
                localStorage.setItem('watchedTutorials', JSON.stringify(watchedTutorials));
                
                // Update button text
                markAsWatchedBtn.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    Já Assistido
                `;
                
                // Update watched indicators
                updateWatchedIndicators();
            });
            
            // Mark tutorial as watched button
            markAsWatchedBtn.addEventListener('click', function() {
                const tutorialCode = this.getAttribute('data-tutorial');
                watchedTutorials[tutorialCode] = true;
                localStorage.setItem('watchedTutorials', JSON.stringify(watchedTutorials));
                
                // Update button text
                this.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    Já Assistido
                `;
                
                // Update watched indicators
                updateWatchedIndicators();
            });
            
            // Function to update watched indicators
            function updateWatchedIndicators() {
                divergenceItems.forEach(item => {
                    const tutorialCode = item.getAttribute('data-tutorial');
                    if (watchedTutorials[tutorialCode]) {
                        item.classList.add('watched');
                    } else {
                        item.classList.remove('watched');
                    }
                });
            }
            
            // Add ripple effect to buttons
            const buttons = document.querySelectorAll('.btn-primary, .video-button');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const x = e.clientX - e.target.getBoundingClientRect().left;
                    const y = e.clientY - e.target.getBoundingClientRect().top;
                    
                    const ripple = document.createElement('span');
                    ripple.style.position = 'absolute';
                    ripple.style.backgroundColor = 'rgba(255, 255, 255, 0.7)';
                    ripple.style.borderRadius = '50%';
                    ripple.style.width = '100px';
                    ripple.style.height = '100px';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    ripple.style.transform = 'translate(-50%, -50%) scale(0)';
                    ripple.style.animation = 'ripple 0.6s linear';
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
            
            // Add keyframes for ripple effect
            const style = document.createElement('style');
            style.textContent = `
                @keyframes ripple {
                    to {
                        transform: translate(-50%, -50%) scale(4);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>